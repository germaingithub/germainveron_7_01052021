{"remainingRequest":"/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/node_modules/babel-loader/lib/index.js!/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/src/api/apiclient.js","dependencies":[{"path":"/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/src/api/apiclient.js","mtime":1620667890725},{"path":"/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9zZWxlbmUvRGVza3RvcC9XZWJfZGV2ZWxvcGVyL1A3X3Zlcm9uX2dlcm1haW4vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvc2VsZW5lL0Rlc2t0b3AvV2ViX2RldmVsb3Blci9QN192ZXJvbl9nZXJtYWluL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvc2VsZW5lL0Rlc2t0b3AvV2ViX2RldmVsb3Blci9QN192ZXJvbl9nZXJtYWluL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3NlbGVuZS9EZXNrdG9wL1dlYl9kZXZlbG9wZXIvUDdfdmVyb25fZ2VybWFpbi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyL2luZGV4IjsKCnZhciBBcGlDbGllbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFwaUNsaWVudCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcGlDbGllbnQpOwoKICAgIHRoaXMuYmFzZVVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvIjsKICB9CgogIF9jcmVhdGVDbGFzcyhBcGlDbGllbnQsIFt7CiAgICBrZXk6ICJoZWFkZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoZWFkZXJzKCkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciBjb250ZW50VHlwZSA9IG9wdGlvbnMuaXNGb3JtRGF0YSA/IHt9IDogewogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfTsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGNvbnRlbnRUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldChwYXRoKSB7CiAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyBwYXRoLCB7CiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzKCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYWxlcnQoIkltcG9zc2libGUgZGUgcsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzIGRlIGwnQVBJIik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInBvc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvc3QocGF0aCwgYm9keSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgcGF0aCwgewogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGJvZHk6IG9wdGlvbnMuaXNGb3JtRGF0YSA/IGJvZHkgOiBKU09OLnN0cmluZ2lmeShib2R5KSwKICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMob3B0aW9ucykKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVSZXNwb25zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2hhbmRsZVJlc3BvbnNlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpLm1hdGNoKC8yMFswMV0vKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5qc29uKCkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoX3gpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZVJlc3BvbnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVSZXNwb25zZTsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEFwaUNsaWVudDsKfSgpOwoKZXhwb3J0IHZhciBhcGlDbGllbnQgPSBuZXcgQXBpQ2xpZW50KCk7"},{"version":3,"sources":["/Users/selene/Desktop/Web_developer/P7_veron_germain/frontend/src/api/apiclient.js"],"names":["router","ApiClient","baseUrl","options","contentType","isFormData","path","fetch","headers","then","response","status","localStorage","clear","push","name","json","alert","body","method","JSON","stringify","handleResponse","toString","match","apiClient"],"mappings":";;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,iBAAnB;;IAEMC,S;AACJ,uBAAc;AAAA;;AACZ,SAAKC,OAAL,GAAe,wBAAf;AACD;;;;WAED,mBAAsB;AAAA,UAAdC,OAAc,uEAAJ,EAAI;AACpB,UAAMC,WAAW,GAAGD,OAAO,CAACE,UAAR,GAChB,EADgB,GAEhB;AACE,wBAAgB;AADlB,OAFJ;AAMA,+BACKD,WADL;AAID;;;WAED,aAAIE,IAAJ,EAAU;AACR,aAAOC,KAAK,CAAC,KAAKL,OAAL,GAAeI,IAAhB,EAAsB;AAChCE,QAAAA,OAAO,EAAE,KAAKA,OAAL;AADuB,OAAtB,CAAL,CAGJC,IAHI,CAGC,UAACC,QAAD,EAAc;AAClB,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,UAAAA,YAAY,CAACC,KAAb;AACAb,UAAAA,MAAM,CAACc,IAAP,CAAY;AAAEC,YAAAA,IAAI,EAAE;AAAR,WAAZ;AACD;;AACD,eAAOL,QAAQ,CAACM,IAAT,EAAP;AACD,OATI,WAUE;AAAA,eAAMC,KAAK,CAAC,8CAAD,CAAX;AAAA,OAVF,CAAP;AAWD;;;WAED,cAAKX,IAAL,EAAWY,IAAX,EAA+B;AAAA;;AAAA,UAAdf,OAAc,uEAAJ,EAAI;AAC7B,aAAOI,KAAK,CAAC,KAAKL,OAAL,GAAeI,IAAhB,EAAsB;AAChCa,QAAAA,MAAM,EAAE,MADwB;AAEhCD,QAAAA,IAAI,EAAEf,OAAO,CAACE,UAAR,GAAqBa,IAArB,GAA4BE,IAAI,CAACC,SAAL,CAAeH,IAAf,CAFF;AAGhCV,QAAAA,OAAO,EAAE,KAAKA,OAAL,CAAaL,OAAb;AAHuB,OAAtB,CAAL,CAIJM,IAJI,CAIC,UAACC,QAAD;AAAA,eAAc,KAAI,CAACY,cAAL,CAAoBZ,QAApB,CAAd;AAAA,OAJD,CAAP;AAKD;;;;oFAGD,iBAAqBA,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA,oBACOA,QAAQ,CAACC,MAAT,CAAgBY,QAAhB,GAA2BC,KAA3B,CAAiC,QAAjC,CADP;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEgBd,QAAQ,CAACM,IAAT,EAFhB;;AAAA;AAAA;;AAAA;AAAA,iDAGSN,QAAQ,CAACM,IAAT,EAHT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;AAOF,OAAO,IAAMS,SAAS,GAAG,IAAIxB,SAAJ,EAAlB","sourcesContent":["import router from \"../router/index\";\n\nclass ApiClient {\n  constructor() {\n    this.baseUrl = \"http://localhost:8081/\";\n  }\n\n  headers(options = {}) {\n    const contentType = options.isFormData\n      ? {}\n      : {\n          \"Content-Type\": \"application/json\",\n        };\n\n    return {\n      ...contentType,\n     //Authorization: \"Bearer \" + localStorage.getItem(\"userToken\"),\n    };\n  }\n\n  get(path) {\n    return fetch(this.baseUrl + path, {\n      headers: this.headers(),\n    })\n      .then((response) => {\n        if (response.status === 401) {\n          localStorage.clear();\n          router.push({ name: \"Login\" });\n        }\n        return response.json();\n      })\n      .catch(() => alert(\"Impossible de récupérer les données de l'API\"));\n  }\n\n  post(path, body, options = {}) {\n    return fetch(this.baseUrl + path, {\n      method: \"POST\",\n      body: options.isFormData ? body : JSON.stringify(body),\n      headers: this.headers(options),\n    }).then((response) => this.handleResponse(response));\n  }\n\n  \n  async handleResponse(response) {\n    if (!response.status.toString().match(/20[01]/))\n      throw await response.json();\n    return response.json();\n  }\n}\n\nexport const apiClient = new ApiClient();\n"]}]}